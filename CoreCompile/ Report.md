### Сборка и установка ядра Linux
#### 1. Установка необходимых утилит и библиотек
Перед сборкой ядра необходимо установить весь необходимый набор инструментов, включая компилятор, библиотеки и утилиты для конфигурации:
```c
sudo apt update
sudo apt install build-essential libncurses-dev bison flex 
sudo apt install libssl-dev bc libelf-dev git
```

#### 2. Получение исходных кодов ядра

Исходный код ядра можно получить со специального репозитория. Я использовала ветку с меткой `v6.15.1` и создала собственную ветку `mykernel`:
```c
git clone https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git
cd linux-stable
git checkout -b mykernel v6.15.1
```

#### 3. Создание и настройка конфигурации
Далее необходимо создать дефолтную конфигурацию, которую позже будем изменять с помощью специального меню:
```c
make defconfig
```
Эта команда создаёт базовый конфигурационный файл `.config`, который можно затем изменить через специальное интерактивное меню.

Чтобы настроить ядро под свои задачи, я открыла текстовое меню конфигурации:
```c
make menuconfig
```

##### Настройки в **General Setup**:
![Pasted image 20250611220038.png](images/Pasted image 20250611220038.png)

Изменения: были отключены такие опции как поддержка аудита и initramfs, чтобы не загружать ядро устаревшим и ненужным функционалом.

##### Настройки в **Processor type and features**:
![Pasted image 20250612104513.png](images/Pasted image 20250612104513.png)

![Pasted image 20250612104530.png](images/Pasted image 20250612104530.png)

Изменения: были включены опции, связанные с архитектурой x86_64, поддержкой многопроцессорности и загрузкой через EFI. Я оставила выключенными экспериментальные или устаревшие платформы.

Остальные параметры ядра оставлены по умолчанию для минимального, но работоспособного окружения.

#### 4. Сборка ядра
Далее, после настройки конфигурации надо ее скомпилировать:
```c
make -j 4
```
Флаг `-j 4` используется для ускорения сборки с помощью 4-х потоков.

 После этого начинается компиляция ядра:
 ![Pasted image 20250612105007.png](images/Pasted image 20250612105007.png)
Ядро скомпилировалось:
 ![Pasted image 20250612114838.png](images/Pasted image 20250612114838.png)
Теперь в папке arch/x86/boot появился  файл bzImage - сжатое ядро для архитектуры x86.

#### 5. Установка модулей и ядра
Затем необходимо выполнить команды для сборки и установки модулей ядра:
```c
make modules
```

```c
make modules_install
```

Чтобы установить ядро, необходимо выполнить команду, которая компилирует ядро vmlinuz-\* и другие служебные файлы, а также добавляет запись о новом ядре в загрузчик grub:
```c
make install
```

![Pasted image 20250612115045.png](images/Pasted image 20250612115045.png)

Скомпилированное и установленное ядро появилось в списке ядер в папке boot:
![Pasted image 20250612115444.png](images/Pasted image 20250612115444.png)

#### 6. Загрузка в новое ядро
После установки ядра необходимо перезагрузить систему, чтобы войти в grub:
```c
sudo reboot
```
Далее, во время загрузки системы надо нажать клавишу Shift, чтобы зайти в меню grub, после этого попадаем в терминал с уже новым, только что скомпилированным ядром.
![Pasted image 20250612115934.png](images/Pasted image 20250612115934.png)
С помощью uname -r узнаем имя ядра, которое сейчас установлено, а с помощью второй команды узнаем  какое имя получило  ядро, которое было нами скомпилировано.

Система является работоспособной, например работает отправка сообщений до определенного адреса сети, что представлено ниже.
![Pasted image 20250612120258.png](images/Pasted image 20250612120258.png)